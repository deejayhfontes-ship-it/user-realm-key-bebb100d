<<<<<<< HEAD
{
    "name": "WhatsApp - Nova Solicitação (Admin)",
    "nodes": [
        {
            "parameters": {
                "httpMethod": "POST",
                "path": "nova-solicitacao",
                "responseMode": "responseNode",
                "options": {}
            },
            "type": "n8n-nodes-base.webhook",
            "typeVersion": 2,
            "position": [
                400,
                300
            ],
            "id": "a1b2c3d4-0001-4000-8000-000000000001",
            "name": "Webhook",
            "webhookId": "nova-solicitacao-wh-001"
        },
        {
            "parameters": {
                "conditions": {
                    "options": {
                        "caseSensitive": true,
                        "leftValue": "",
                        "typeValidation": "strict"
                    },
                    "conditions": [
                        {
                            "id": "cond-secret-001",
                            "leftValue": "={{ $json.headers['x-webhook-secret'] }}",
                            "rightValue": "minha-chave-secreta-aqui",
                            "operator": {
                                "type": "string",
                                "operation": "equals"
                            }
                        }
                    ],
                    "combinator": "and"
                },
                "options": {}
            },
            "type": "n8n-nodes-base.if",
            "typeVersion": 2,
            "position": [
                620,
                300
            ],
            "id": "a1b2c3d4-0002-4000-8000-000000000002",
            "name": "Secret Válido?"
        },
        {
            "parameters": {
                "mode": "runOnceForAllItems",
                "language": "javaScript",
                "jsCode": "const body = $input.first().json.body || {};\nconst telefoneAdmin = '5535991116310';\nconst mensagem = 'Nova solicitacao recebida!' +\n  '\\n\\nProtocolo: ' + (body.protocolo || 'N/A') +\n  '\\nCliente: ' + (body.cliente || 'N/A') +\n  '\\nTitulo: ' + (body.titulo || 'N/A') +\n  '\\nPrazo: ' + (body.prazo || 'N/A');\n\nreturn [{ json: { telefoneAdmin, mensagem } }];"
            },
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                840,
                300
            ],
            "id": "a1b2c3d4-0003-4000-8000-000000000003",
            "name": "Montar Mensagem"
        },
        {
            "parameters": {
                "method": "POST",
                "url": "https://api.z-api.io/instances/3EEB919DC2DF404ACD19625405C53502/token/3504910582F1C58DD2C7F53A/send-text",
                "sendBody": true,
                "contentType": "json",
                "specifyBody": "json",
                "jsonBody": "={{ JSON.stringify({ phone: $json.telefoneAdmin, message: $json.mensagem }) }}",
                "options": {}
            },
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 4.2,
            "position": [
                1060,
                300
            ],
            "id": "a1b2c3d4-0004-4000-8000-000000000004",
            "name": "Enviar WhatsApp (Z-API)"
        },
        {
            "parameters": {
                "respondWith": "json",
                "responseBody": "={\"status\":\"ok\",\"message\":\"Notificação enviada com sucesso\"}",
                "options": {
                    "responseCode": 200
                }
            },
            "type": "n8n-nodes-base.respondToWebhook",
            "typeVersion": 1.1,
            "position": [
                1280,
                300
            ],
            "id": "a1b2c3d4-0005-4000-8000-000000000005",
            "name": "Responder 200"
        },
        {
            "parameters": {
                "respondWith": "json",
                "responseBody": "={\"error\":\"Não autorizado\"}",
                "options": {
                    "responseCode": 403
                }
            },
            "type": "n8n-nodes-base.respondToWebhook",
            "typeVersion": 1.1,
            "position": [
                840,
                520
            ],
            "id": "a1b2c3d4-0006-4000-8000-000000000006",
            "name": "Responder 403"
        }
    ],
    "connections": {
        "Webhook": {
            "main": [
                [
                    {
                        "node": "Secret Válido?",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Secret Válido?": {
            "main": [
                [
                    {
                        "node": "Montar Mensagem",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Responder 403",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Montar Mensagem": {
            "main": [
                [
                    {
                        "node": "Enviar WhatsApp (Z-API)",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Enviar WhatsApp (Z-API)": {
            "main": [
                [
                    {
                        "node": "Responder 200",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        }
    },
    "settings": {
        "executionOrder": "v1"
    }
=======
{
    "name": "WhatsApp - Nova Solicitação (Admin)",
    "nodes": [
        {
            "parameters": {
                "httpMethod": "POST",
                "path": "nova-solicitacao",
                "responseMode": "responseNode",
                "options": {}
            },
            "type": "n8n-nodes-base.webhook",
            "typeVersion": 2,
            "position": [
                400,
                300
            ],
            "id": "a1b2c3d4-0001-4000-8000-000000000001",
            "name": "Webhook",
            "webhookId": "nova-solicitacao-wh-001"
        },
        {
            "parameters": {
                "conditions": {
                    "options": {
                        "caseSensitive": true,
                        "leftValue": "",
                        "typeValidation": "strict"
                    },
                    "conditions": [
                        {
                            "id": "cond-secret-001",
                            "leftValue": "={{ $json.headers['x-webhook-secret'] }}",
                            "rightValue": "minha-chave-secreta-aqui",
                            "operator": {
                                "type": "string",
                                "operation": "equals"
                            }
                        }
                    ],
                    "combinator": "and"
                },
                "options": {}
            },
            "type": "n8n-nodes-base.if",
            "typeVersion": 2,
            "position": [
                620,
                300
            ],
            "id": "a1b2c3d4-0002-4000-8000-000000000002",
            "name": "Secret Válido?"
        },
        {
            "parameters": {
                "mode": "runOnceForAllItems",
                "language": "javaScript",
                "jsCode": "const body = $input.first().json.body || {};\nconst telefoneAdmin = '5535991116310';\nconst mensagem = 'Nova solicitacao recebida!' +\n  '\\n\\nProtocolo: ' + (body.protocolo || 'N/A') +\n  '\\nCliente: ' + (body.cliente || 'N/A') +\n  '\\nTitulo: ' + (body.titulo || 'N/A') +\n  '\\nPrazo: ' + (body.prazo || 'N/A');\n\nreturn [{ json: { telefoneAdmin, mensagem } }];"
            },
            "type": "n8n-nodes-base.code",
            "typeVersion": 2,
            "position": [
                840,
                300
            ],
            "id": "a1b2c3d4-0003-4000-8000-000000000003",
            "name": "Montar Mensagem"
        },
        {
            "parameters": {
                "method": "POST",
                "url": "https://api.z-api.io/instances/3EEB919DC2DF404ACD19625405C53502/token/3504910582F1C58DD2C7F53A/send-text",
                "sendBody": true,
                "contentType": "json",
                "specifyBody": "json",
                "jsonBody": "={{ JSON.stringify({ phone: $json.telefoneAdmin, message: $json.mensagem }) }}",
                "options": {}
            },
            "type": "n8n-nodes-base.httpRequest",
            "typeVersion": 4.2,
            "position": [
                1060,
                300
            ],
            "id": "a1b2c3d4-0004-4000-8000-000000000004",
            "name": "Enviar WhatsApp (Z-API)"
        },
        {
            "parameters": {
                "respondWith": "json",
                "responseBody": "={\"status\":\"ok\",\"message\":\"Notificação enviada com sucesso\"}",
                "options": {
                    "responseCode": 200
                }
            },
            "type": "n8n-nodes-base.respondToWebhook",
            "typeVersion": 1.1,
            "position": [
                1280,
                300
            ],
            "id": "a1b2c3d4-0005-4000-8000-000000000005",
            "name": "Responder 200"
        },
        {
            "parameters": {
                "respondWith": "json",
                "responseBody": "={\"error\":\"Não autorizado\"}",
                "options": {
                    "responseCode": 403
                }
            },
            "type": "n8n-nodes-base.respondToWebhook",
            "typeVersion": 1.1,
            "position": [
                840,
                520
            ],
            "id": "a1b2c3d4-0006-4000-8000-000000000006",
            "name": "Responder 403"
        }
    ],
    "connections": {
        "Webhook": {
            "main": [
                [
                    {
                        "node": "Secret Válido?",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Secret Válido?": {
            "main": [
                [
                    {
                        "node": "Montar Mensagem",
                        "type": "main",
                        "index": 0
                    }
                ],
                [
                    {
                        "node": "Responder 403",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Montar Mensagem": {
            "main": [
                [
                    {
                        "node": "Enviar WhatsApp (Z-API)",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        },
        "Enviar WhatsApp (Z-API)": {
            "main": [
                [
                    {
                        "node": "Responder 200",
                        "type": "main",
                        "index": 0
                    }
                ]
            ]
        }
    },
    "settings": {
        "executionOrder": "v1"
    }
>>>>>>> 156f36cf0eee94361ff12bfb77e006213e68283d
}